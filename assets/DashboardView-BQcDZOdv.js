import{n as x,g as y,r as o,p as f,o as c,c as d,b as t,F as b,q as v,t as s,m as u,e as A}from"./index-CsmGTcOc.js";const S={class:"max-w-4xl mx-auto p-4"},P={class:"mb-8"},D=t("h2",{class:"text-xl font-semibold mb-2"},"Payment History",-1),F={class:"overflow-x-auto"},E={class:"min-w-full bg-white border"},K=t("thead",{class:"bg-gray-200"},[t("tr",null,[t("th",{class:"py-2 px-4 text-left"},"Date"),t("th",{class:"py-2 px-4 text-left"},"Meeting #"),t("th",{class:"py-2 px-4 text-left"},"Payment"),t("th",{class:"py-2 px-4 text-left"},"Attendance"),t("th",{class:"py-2 px-4 text-left"},"Fines"),t("th",{class:"py-2 px-4 text-left"},"Loan"),t("th",{class:"py-2 px-4 text-left"},"Saving")])],-1),w={class:"py-2 px-4"},C={class:"py-2 px-4"},N={class:"py-2 px-4"},k={class:"py-2 px-4"},B={class:"py-2 px-4"},L={class:"py-2 px-4"},V={class:"py-2 px-4"},I={class:"mb-8"},M=t("h2",{class:"text-xl font-semibold mb-2"},"Summary",-1),T={class:"grid grid-cols-2 gap-4"},O={class:"p-4 bg-gray-100 rounded"},q=t("h3",{class:"font-semibold"},"Total Attendances",-1),H={class:"p-4 bg-gray-100 rounded"},U=t("h3",{class:"font-semibold"},"Missed Attendances",-1),j={class:"p-4 bg-gray-100 rounded"},z=t("h3",{class:"font-semibold"},"Fines Accrued",-1),G={class:"p-4 bg-gray-100 rounded"},J=t("h3",{class:"font-semibold"},"Fines Paid",-1),Q={class:"p-4 bg-gray-100 rounded"},R=t("h3",{class:"font-semibold"},"Outstanding Fines",-1),W={key:0,class:"mb-8"},X=t("h2",{class:"text-xl font-semibold mb-2"},"Loan Details",-1),Y={class:"p-4 bg-gray-100 rounded"},Z=t("strong",null,"Loan Amount:",-1),$=t("strong",null,"Outstanding Balance:",-1),tt=t("strong",null,"Next Payment Date:",-1),nt={__name:"DashboardView",setup(st){const h=x(),m=y(),n=o([]),a=o({totalAttendances:10,missedAttendances:2,finesAccrued:"200 KES",finesPaid:"150 KES",outstandingFines:"50 KES"}),l=o({amount:"10,000 KES",balance:"4,000 KES",nextPaymentDate:"2024-09-01"});return o(""),o(""),o(""),f(async()=>{const _=await h.fetchCollection("Payments");n.value=_.filter(i=>i.memberId==m.user.memberId);const e=n.value[0].meetingsCount-n.value.length,r=n.value.reduce((i,g)=>g.fine+i,0);a.value={totalAttendances:n.value.length,missedAttendances:e,finesAccrued:e*50+" KES",finesPaid:r+" KES",outstandingFines:e*50-r+" KES"}}),(_,p)=>(c(),d("div",S,[t("section",P,[D,t("div",F,[t("table",E,[K,t("tbody",null,[(c(!0),d(b,null,v(n.value,e=>(c(),d("tr",{key:e.id,class:"border-t"},[t("td",w,s(new Intl.DateTimeFormat("en-UK",{year:"2-digit",month:"numeric",day:"numeric"}).format(new Date(e.date))),1),t("td",C,s(e.meetingNum),1),t("td",N,s(e.payment),1),t("td",k,s(0-e.attendance),1),t("td",B,s(0-e.fine),1),t("td",L,s(0-e.loanPayment),1),t("td",V,s(e.saving),1)]))),128))])])])]),t("section",I,[M,t("div",T,[t("div",O,[q,t("p",null,s(a.value.totalAttendances),1)]),t("div",H,[U,t("p",null,s(a.value.missedAttendances),1)]),t("div",j,[z,t("p",null,s(a.value.finesAccrued),1)]),t("div",G,[J,t("p",null,s(a.value.finesPaid),1)]),t("div",Q,[R,t("p",null,s(a.value.outstandingFines),1)])])]),l.value?(c(),d("section",W,[X,t("div",Y,[t("p",null,[Z,u(" "+s(l.value.amount),1)]),t("p",null,[$,u(" "+s(l.value.balance),1)]),t("p",null,[tt,u(" "+s(l.value.nextPaymentDate),1)])])])):A("",!0)]))}};export{nt as default};
